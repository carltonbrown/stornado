#!/usr/bin/env ruby
require 'stornado'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: stornado [options]"
  opts.on("-r FILE", "Repo config file") do |f|
    options[:repo_config] = f
  end

  opts.on("-p PROXY", "DEPRECATED") do |p|
    puts "The -p option is deprecated.  Set the HTTP_PROXY environment variable"
    options[:proxy] = p
  end
end.parse!

stornado = Stornado.new(options)

main_menu = ARGV.shift
result = MenuCommands.send(main_menu, stornado, ARGV).call
